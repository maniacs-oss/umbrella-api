{"version":3,"sources":["actions/index.js"],"names":["errorHandler","getRepos","API_URL","dispatch","error","type","errorMessage","data","status","payload","console","log","get","then","response"],"mappings":";;;;;QASgBA,Y,GAAAA,Y;QAwBAC,Q,GAAAA,Q;;AAjChB;;;;AACA;;AACA;;;;AACA;;;;AAIA,IAAMC,UAAU,0BAAhB;;AAEO,SAASF,YAAT,CAAsBG,QAAtB,EAAgCC,KAAhC,EAAuCC,IAAvC,EAA6C;AAClD,MAAIC,eAAe,EAAnB;;AAEA,MAAGF,MAAMG,IAAN,CAAWH,KAAd,EAAqB;AACnBE,mBAAeF,MAAMG,IAAN,CAAWH,KAA1B;AACD,GAFD,MAEO,IAAGA,MAAMG,IAAT,EAAe;AACpBD,mBAAeF,MAAMG,IAArB;AACD,GAFM,MAEA;AACLD,mBAAeF,KAAf;AACD;;AAED,MAAGA,MAAMI,MAAN,KAAiB,GAApB,EAAyB;AACvBL,aAAS;AACPE,YAAMA,IADC;AAEPI,eAAS;AAFF,KAAT;AAID,GALD,MAKO;AACLN,aAAS;AACPE,YAAMA,IADC;AAEPI,eAASH;AAFF,KAAT;AAID;AACF;;AAEM,SAASL,QAAT,GAAoB;AACzBS,UAAQC,GAAR,CAAY,WAAZ;AACA,SAAO,UAASR,QAAT,EAAmB;AACxB,oBAAMS,GAAN,CAAaV,OAAb,kBACCW,IADD,CACM,oBAAY;AAChBV,eAAS;AACPE,+BADO;AAEPI,iBAASK,SAASP;AAFX,OAAT;AAIA;AACD,KAPD;AAQD,GATD;AAUD","file":"index.js","sourceRoot":"/Users/rokche/go/src/secfirst.org/api/editor","sourcesContent":["import axios from 'axios';\nimport { browserHistory } from 'react-router';\nimport cookie from 'react-cookie';\nimport { CATEGORIES,\n         SEGMENTS,\n         CHECK_ITEMS } from './types';\n\nconst API_URL = 'http://127.0.0.1:3000/v1';\n\nexport function errorHandler(dispatch, error, type) {\n  let errorMessage = '';\n\n  if(error.data.error) {\n    errorMessage = error.data.error;\n  } else if(error.data) {\n    errorMessage = error.data;\n  } else {\n    errorMessage = error;\n  }\n\n  if(error.status === 401) {\n    dispatch({\n      type: type,\n      payload: 'You are not authorized to do this. Please login and try again.'\n    });\n  } else {\n    dispatch({\n      type: type,\n      payload: errorMessage\n    });\n  }\n}\n\nexport function getRepos() {\n  console.log(\"get repos\");\n  return function(dispatch) {\n    axios.get(`${API_URL}/categories`)\n    .then(response => {\n      dispatch({\n        type: CATEGORIES,\n        payload: response.data\n      });\n      // console.log(response.data);\n    })\n  }\n}"]}